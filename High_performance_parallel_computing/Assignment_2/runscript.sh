echo //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
echo ////////////////////////////////////////////////////////Vectorised////////////////////////////////////////////////////////////////////////////////////////////////////////
echo //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
g++ Water_vectorised.cpp -O3 -ffast-math -g -pg -o vec
steps=100000
molecules=(4 16 25)
for mol in "${molecules[@]}"
do
    echo "Running $mol molecules with $steps steps vectorised" 
    ./vec -no_mol "$mol" -steps "$steps" -fwrite 1000000
    echo
    echo ----------------------------------Profile--------------------------------------------
    echo "$mol mol vec"
    gprof -p -b ./vec gmon.out
    echo -------------------------------------------------------------------------------------
    echo
    sleep 1
done
echo //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
echo ////////////////////////////////////////////////////////Sequential////////////////////////////////////////////////////////////////////////////////////////////////////////
echo //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
g++ Water_sequential.cpp -O3 -ffast-math -g -pg -o seq
for mol in 2 25
do
    echo "Running $mol molecules with $steps steps sequential" 
    ./seq -no_mol "$mol" -steps "$steps" -fwrite 1000000
    echo ------------------------------------Profile-------------------------------------------
    echo "$mol mol seq"
    gprof -p -b ./seq gmon.out
    echo -------------------------------------------------------------------------------------
    echo
    sleep 1
done
echo //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
echo ////////////////////////////////////////////////////////Open mp////////////////////////////////////////////////////////////////////////////////////////////////////////
echo //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
g++ Water_vectorisedopenmp.cpp -O3 -ffast-math -g -fopenmp-simd -o openmpv
for mol in 2 16 12
do
    echo "Running $mol molecules with $steps steps Open mp" 
    ./openmpv -no_mol "$mol" -steps "$steps" -fwrite 1000000
    echo ------------------------------------Profile-------------------------------------------
    echo "$mol mol open mp"
    gprof -p -b ./openmpv gmon.out
    echo -------------------------------------------------------------------------------------
    echo
    sleep 1
done